enable_testing()

add_subdirectory(lib/catch/)

file(GLOB ${PROJECT_NAME}_tests_glob
    "tests/*.h"
    "tests/*.cpp"
)

add_executable(${PROJECT_NAME}_tests ${${PROJECT_NAME}_tests_glob})

set_target_properties(${PROJECT_NAME}_tests
    PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "bin/tests")
target_link_libraries(${PROJECT_NAME}_tests catch)
target_link_libraries(${PROJECT_NAME}_tests ${PROJECT_NAME})

add_custom_command(TARGET ${PROJECT_NAME}_tests
    POST_BUILD
    COMMAND bin/tests/${PROJECT_NAME}_tests ) # -s)
